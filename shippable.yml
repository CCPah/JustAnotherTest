language: java

jdk:
  - oraclejdk8

env:
  - NIGHTLYBUILD=master
  - NIGHTLYBUILD=testbranch

matrix:
    allow_failures:
        - env: NIGHTLYBUILD=testbranch

    exclude:
        - env:
            - NIGHTLYBUILD=master
        - env:
            - NIGHTLYBUILD=testbranch
    include:
        - env: 
            - NIGHTLYBUILD=master
            - JOB_TRIGGERED_BY_NAME="nightly"
  
build:
  ci:
   - git checkout $NIGHTLYBUILD
   - cd mvn-parent
   - mvn clean verify surefire:test --fail-at-end